<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="author" content="Ching Hung">
    <title>Category - BlackBox | For Creators & Streamers</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script type="text/JavaScript">
        function $e(id) {
            return document.getElementById(id);
        }

        function loadOrder() {
            let submit = localStorage.getItem("submit");

            if (submit != null) {
                localStorage.removeItem("submit");
            } else {
                return false;
            }

            let data = JSON.parse(localStorage.getItem("data"));
            let div = document.createElement("div");
            let span = document.createElement("span");

            let subtotal = 0.00;
            let totalQuantity = 0;
            let shippingFee = 10.00;

            for (id in data) {
                let name = data[id]["name"];
                let image = data[id]["image"];
                let price = data[id]["price"];
                let quantity = data[id]["quantity"];

                let divOrder = div.cloneNode();
                divOrder.classList.add("order");

                let divProductImage = div.cloneNode();
                divProductImage.classList.add("product-image");
                divProductImage.style.backgroundImage = "url('img/" + image + "')";
                divOrder.appendChild(divProductImage);

                let divProductInfo = div.cloneNode();
                divProductInfo.classList.add("product-info");
                spanText = divProductInfo.appendChild(span.cloneNode());
                spanText.innerHTML = name;
                divOrder.appendChild(divProductInfo);

                let divProductPrice = div.cloneNode();
                divProductPrice.classList.add("product-price");
                spanText = divProductPrice.appendChild(span.cloneNode());
                spanText.innerHTML = "RM " + price;
                divOrder.appendChild(divProductPrice);

                let divProductQuantity = div.cloneNode();
                divProductQuantity.classList.add("product-quantity");
                spanText = divProductQuantity.appendChild(span.cloneNode());
                spanText.innerHTML = quantity;
                divOrder.appendChild(divProductQuantity);

                let divProductTotal = div.cloneNode();
                divProductTotal.classList.add("product-total");
                spanText = divProductTotal.appendChild(span.cloneNode());
                spanText.innerHTML = "RM " + (price * quantity).toFixed(2);
                divOrder.appendChild(divProductTotal);

                $e("order-list").appendChild(divOrder);

                subtotal += Number((price * quantity).toFixed(2));
                totalQuantity += quantity;
            }

            if (totalQuantity > 10) {
                subtotal *= 0.85;
            } else if (totalQuantity > 5) {
                subtotal *= 0.95;
            }

            subtotal = Number(subtotal.toFixed(2));
            if (subtotal > 100) shippingFee = 0.00;
            let grandTotal = subtotal + shippingFee;

            $e("subtotal").innerHTML = subtotal.toFixed(2);
            $e("shipping-fee").innerHTML = shippingFee.toFixed(2);
            $e("grand-total").innerHTML = grandTotal.toFixed(2);
        }
    </script>
</head>

<body onload="loadOrder();">
    <div class="header">
        <div class="logo">
            <a href="home.html">
                <img class="logo" src="img/BlackBox Logo 2.png">
            </a>
        </div>
        <div class="nav">
            <ul class="menu">
                <li><a href="#">Webcams</a></li>
                <li><a href="category-capture.html">Capture</a></li>
                <li><a href="#">Audio</a></li>
                <li><a href="#">Control Deck</a></li>
                <li><a href="#">Lightning</a></li>
                <li>|</li>
                <li><a href="#">Support</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
        <div class="opt">
            <a href="#">
                <div class="opt-button search-button"></div>
            </a>
            <a href="register.html">
                <div class="opt-button user-button"></div>
            </a>
        </div>
    </div>
    <div class="body">
        <div class="title">
            <span>Order Summary</span>
        </div>
        <div class="order-list" id="order-list">
            <div class="list-head">
                <div class="col-product">
                    <span>Product</span>
                </div>
                <div class="col-price">
                    <span>Unit Price</span>
                </div>
                <div class="col-quantity">
                    <span>Quantity</span>
                </div>
                <div class="col-total">
                    <span>Total Price</span>
                </div>
            </div>
        </div>
        <div class="summary">
            <div class="summary-item">
                <div class="item-name">Subtotal:&nbsp;&nbsp;&nbsp;&nbsp;RM</div>
                <div class="item-value" id="subtotal">0.00</div>
            </div>
            <div class="summary-item">
                <div class="item-name">Shipping Fee:&nbsp;&nbsp;&nbsp;&nbsp;RM</div>
                <div class="item-value" id="shipping-fee">0.00</div>
            </div>
            <div class="summary-item">
                <div class="item-name">Grand Total:&nbsp;&nbsp;&nbsp;&nbsp;RM</div>
                <div class="item-value" id="grand-total">0.00</div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-top">
            <ul class="footer-section">
                <li>
                    <ul class="footer-section-content">
                        <li class="label">PRODUCTS</li>
                        <li><a href="#">Webcams</a></li>
                        <li><a href="category-capture.html">Capture</a></li>
                        <li><a href="#">Audio</a></li>
                        <li><a href="#">Control Deck</a></li>
                        <li><a href="#">Lightning</a></li>
                    </ul>
                </li>
                <li>
                    <ul class="footer-section-content">
                        <li class="label">SUPPORT</li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Technical Support</a></li>
                        <li><a href="#">Customer Service</a></li>
                        <li><a href="#">Warranty</a></li>
                        <li><a href="#">Return & Refunds</a></li>
                        <li><a href="#">Terms & Conditions</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </li>
                <li>
                    <ul class="footer-section-content">
                        <li class="label">ABOUT US</li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">BlackBox</a></li>
                        <li><a href="#">Avermedia</a></li>
                        <li><a href="#">Elgato</a></li>
                    </ul>
                </li>
                <li>
                    <ul class="footer-section-content">
                        <li class="label">CONNECT</li>
                        <li><a href="#">Twitter</a></li>
                        <li><a href="#">LinkedIn</a></li>
                        <li><a href="#">Facebook</a></li>
                        <li><a href="#">Instagram</a></li>
                        <li><a href="#">Youtube</a></li>
                        <li><a href="#">Discord</a></li>
                        <li><a href="#">Twitch</a></li>
                        <li><a href="#">Reddit</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="footer-bottom">
            <span class="copyright">Copyright Â© BlackBox 2022</span>
        </div>
    </div>
</body>

</html>